<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Open Graph -->
  <meta property="og:image" content="OGsnap.jpg" />
  <meta property="og:title" content="{{FULLNAME}}" />
  <meta property="og:description" content="{{TAGLINE}}" />

  <title>{{FULLNAME}}</title>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <link href="css/style.css" rel="stylesheet">
  <link rel="stylesheet" href="animate.css">
</head>

<body>

<!-- Hidden values for JS -->
<input type="hidden" id="shareMessage" value="{{SHARE_MESSAGE}}">
<input type="hidden" id="ecardSlug" value="{{SLUG}}">

<div class="container">
  <div class="row justify-content-md-center g-0">
    <div class="col col-lg-4 col-md-12 col-sm-12 text-center ecard">

      <!-- Carousel -->
      <div id="demo" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img src="images/s1.webp" class="d-block w-100">
          </div>
          <div class="carousel-item">
            <img src="images/s2.webp" class="d-block w-100">
          </div>
        </div>
      </div>

      <!-- Logo -->
      <div class="profile_img_div">
        <img src="images/LOGO.jpg" class="profile_img shadow" />
      </div>

      <!-- Profile -->
      <div class="profile_info">
        <h4 class="name">{{FULLNAME}}</h4>
        <p>{{TAGLINE}}</p>
        <p>{{DESIGNATION}}</p>
        <p>{{COMPANY}}</p>
      </div>

      <!-- Contact Buttons -->
      <div class="row justify-content-md-center g-0">
        <div class="col-4 contact_info">
          <a href="javascript:void(0)" id="whatsappBtn" class="green">
            <i class="fa fa-whatsapp fa-2x"></i><br>Whatsapp
          </a>
        </div>

        <div class="col-4 contact_info">
          <a href="tel:{{PHONE}}" class="skyblue">
            <i class="fa fa-phone fa-2x"></i><br>Call
          </a>
        </div>

        <div class="col-4 contact_info">
          <a href="contact.vcf" class="pink">
            <i class="fa fa-address-book fa-2x"></i><br>Add Contact
          </a>
        </div>
      </div>

      <!-- Tabs -->
      <div class="tab-div">
        <ul class="nav nav-tabs justify-content-center mb-3">
          <li class="nav-item">
            <a class="nav-link active" data-bs-toggle="tab" href="#servicesTab">Services</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="tab" href="#aboutTab">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="tab" href="#testimonialsTab">Testimonials</a>
          </li>
        </ul>

        <div class="tab-content">
          <div class="tab-pane fade show active" id="servicesTab">
            {{SERVICES}}
          </div>
          <div class="tab-pane fade" id="aboutTab">
            {{ABOUT}}
          </div>
          <div class="tab-pane fade" id="testimonialsTab">
            {{TESTIMONIALS}}
          </div>
        </div>
      </div>

      <!-- Share -->
      <div class="m-2">
        <div class="input-group mb-3">
          <input type="text" id="personNo" class="form-control" placeholder="Enter Mobile Number">
          <span class="input-group-text" id="shareMe">Share</span>
        </div>
      </div>

      <!-- Social Media -->
      <div class="social_media">
        <a href="mailto:{{EMAIL}}"><i class="fa fa-envelope fa-2x"></i></a>
        <a href="{{INSTAGRAM}}" target="_blank"><i class="fa fa-instagram fa-2x"></i></a>
        <a href="{{FACEBOOK}}" target="_blank"><i class="fa fa-facebook fa-2x"></i></a>
        <a href="{{YOUTUBE}}" target="_blank"><i class="fa fa-youtube-play fa-2x"></i></a>
        <a href="{{LINKEDIN}}" target="_blank"><i class="fa fa-linkedin fa-2x"></i></a>
        <a href="{{MAPLINK}}" target="_blank"><i class="fa fa-google fa-2x"></i></a>
        <a href="{{TWITTER}}" target="_blank"><i class="fa fa-twitter fa-2x"></i></a>
      </div>

      <p class="footer-text">
        Designed & Developed by <a href="https://upmedia.co.in" target="_blank">Up Media</a>
      </p>

    </div>
  </div>
</div>

<script>
function buildWhatsappMessage() {
  var msg = document.getElementById("shareMessage").value.trim();
  var slug = document.getElementById("ecardSlug").value.trim();

  // ðŸ”¥ PUBLIC ECARD LINK
  var link = "https://e-bizcard.in/public/" + slug;
  // local testing:
  // var link = "http://localhost:5001/api/ecards/public/" + slug;

  let finalMsg = "";
  if (msg) finalMsg += msg + "\n\n";
  finalMsg += link + "\n\n";
  finalMsg += "Send me a hi to activate this link";

  return encodeURIComponent(finalMsg);
}

$("#whatsappBtn, #shareMe").click(function () {
  var no = $("#personNo").val();
  if (!no && this.id === "shareMe") {
    alert("Please enter a mobile number");
    return;
  }

  var phone = this.id === "whatsappBtn"
    ? "{{WHATSAPP}}"
    : "91" + no;

  window.location.href =
    "https://api.whatsapp.com/send?phone=" +
    phone +
    "&text=" +
    buildWhatsappMessage();
});

// Auto-hide social icons if empty
document.querySelectorAll(".social_media a").forEach(function (a) {
  const href = a.getAttribute("href");
  if (!href || href.includes("{{") || href === "mailto:") {
    a.style.display = "none";
  }
});
</script>

</body>
</html>
